#ifndef __GA_H__
#define __GA_H__

#include "defs.h"
#include "Candidate.h"

//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////

struct Job
{
	Candidate* m_pCandidate;
};

//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////

class Ga
{
public:
	Ga();	
	void RunGa();
	void JobProcessingThreadFunc(int nThreadIndex);
	void CreateTargetMeasurements();
	static double CalculateCost(Candidate* pCandidate);

//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////

private:
	void InitGa();
	void CalculateCosts();
	Job* GetJob();
	int GetMate();
	void CreateChild(Candidate* pParent1, Candidate* pParent2, Candidate* pChild);
	bool FindSimilarCandidate(int nIndex);
	void CreateMutations();

//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
	
public:
	static int nNumberOfMachines;	
	
private:	
	static int nCurIteration;
	double* m_pTargetMeasurement1;
	double* m_pTargetMeasurement2;
	double* MinCost;
	double* Rank;
	vector<Candidate*> Population;
	vector<Job*> Jobs;
};

//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////

#endif // __GA_H__

