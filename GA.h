#ifndef __GA_H__
#define __GA_H__

#include <mpi.h>
#include "safeJobVector.h"

//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////

class Ga
{
public:
	Ga();
	~Ga();
	void RunGa();
	void Test();
	
//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////

private:
	bool ReadTargetMeasurements();
	void CreateTargetMeasurements();
	void CreateJobs();
	void ProcessJobs();
	void ProcessResults();
	void ProcessResults(Candidate* pCandidate);
	int ChooseRandomParent();
	int Mutate(int nInValue);
	Candidate* CreateChild(Candidate* pParent1, Candidate* pParent2, int nIndex);
	Candidate* CreateRandomCandidate(int nIndex);
	bool FindSimilarCandidate(int nIndex);
	void CreateMutations();
	double CalculateTargetCoverage(double** pBestMatch);
	int CalculateError(double** pBestMatch);

//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
	
public:
	static int nNumberOfMachines;	
	
private:	
	int m_nCurIteration;
	double* m_pTargetMeasurement1;
	double* m_pTargetMeasurement2;
	double** m_pTargetFibroblastMat;
	unsigned long int* MinCost;
	double* Rank;
	vector<Candidate*> Population;
	CSafeJobVector m_jobVector;
};

//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////

#endif // __GA_H__

